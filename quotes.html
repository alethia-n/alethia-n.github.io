<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Citations â€“ Alethia</title>
  <link rel="stylesheet" href="style.css">
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signInWithPopup, GoogleAuthProvider, signOut } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
    import { firebaseConfig } from "./firebase-config.js";

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    const loginSection = document.getElementById("login-section");
    const quotesSection = document.getElementById("quotes-section");

    document.getElementById("login-btn").addEventListener("click", async () => {
      await signInWithPopup(auth, provider);
    });

    onAuthStateChanged(auth, (user) => {
      if (user) {
        loginSection.style.display = "none";
        quotesSection.style.display = "block";
        document.getElementById("user-email").textContent = user.email;
      } else {
        loginSection.style.display = "block";
        quotesSection.style.display = "none";
      }
    });

    document.getElementById("logout-btn").addEventListener("click", async () => {
      await signOut(auth);
    });
  </script>
</head>
<body>
  <header>
    <h1>Citations & RÃ©flexions</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="quotes.html" class="active">Quotes</a>
      <a href="contact.html">Contact</a>
    </nav>
  </header>

  <main>
    <!-- Section connexion -->
    <section id="login-section" style="text-align:center;">
      <p>Pour accÃ©der aux citations et au chat, veuillez vous connecter :</p>
      <button id="login-btn">Se connecter avec Google</button>
    </section>

    <!-- Section citations -->
    <section id="quotes-section" style="display:none;">
      <p>ConnectÃ© en tant que <strong id="user-email"></strong> <button id="logout-btn">Se dÃ©connecter</button></p>

      <article>
        <blockquote>
          Â« There is a crack in everything, that's how the light gets in. Â»  
          â€” Leonard Cohen
        </blockquote>
        <div class="comment-box">
          <textarea placeholder="Laisser un commentaire..."></textarea>
          <button>Envoyer</button>
        </div>
      </article>

      <article>
        <blockquote>
          Â« Sometimes, the smallest step in the right direction ends up being the biggest step of your life. Â»
        </blockquote>
        <div class="comment-box">
          <textarea placeholder="Laisser un commentaire..."></textarea>
          <button>Envoyer</button>
        </div>
      </article>
    </section>
  </main>

  <!-- IcÃ´ne chat -->
  <div id="chat-icon" onclick="toggleChat()">ðŸ’¬</div>

  <!-- FenÃªtre de chat -->
  <div id="chat-window">
    <div id="chat-header">Chat Alethia <button onclick="toggleChat()">Ã—</button></div>
    <div id="chat-messages"></div>
    <input type="text" id="chat-input" placeholder="Ã‰crivez un message...">
  </div>

  <footer>
    <p>Â© 2025 Alethia</p>
  </footer>

  <script>
    const chatIcon = document.getElementById("chat-icon");
    const chatWindow = document.getElementById("chat-window");

    function toggleChat() {
      chatWindow.style.display = (chatWindow.style.display === "block") ? "none" : "block";
    }
  </script>
</body>
</html>
